<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Kindle时钟</title>
    <link rel="stylesheet" type="text/css" href="/css/clock.css">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
</head>

<body>
    <div class="top-bar">
        <a href="/" class="nav-btn"># 主页</a>
        <a href="/clock/clock.html" class="nav-btn">% 12小时制</a>
        <a href="javascript:void(0)" id="rotateLink" class="nav-btn">@ 旋转显示</a>
        <span class="divider">|</span>
        <div class="title-wrapper">
            <h1 class="page-title">时间</h1>
        </div>
    </div>
    <div class="page">
        <div id="log_container">
        </div>
        <div id="top">
        </div>

        <div id="middle">
            <div id="time_container">
                <div class="time" id="time"></div>
                <div class="date" id="date"></div>
            </div>
        </div>

        <div id="bottom">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const rotateLink = document.getElementById('rotateLink');
            const targetDiv = document.getElementById('main');
            let currentAngle = 0;
            function rotateTargetDiv() {
                currentAngle += 90;
                if (currentAngle >= 360) {
                    currentAngle = 0;
                }
                targetDiv.style.transform = `rotate(${currentAngle}deg)`;
            }
            if (rotateLink) {
                rotateLink.addEventListener('click', rotateTargetDiv);
            }
        });
        
        function createXHR() {
            var xhr = null;
            if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
            } else if (window.ActiveXObject) {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
            return xhr;
        }

        function clock() {
            var date = new Date()
            var utc8DiffMinutes = date.getTimezoneOffset() + 480
            date.setMinutes(date.getMinutes() + utc8DiffMinutes)

            var hour = date.getHours()

            var timeString = hour + ':' + ('0' + date.getMinutes()).slice(-2)
            var dateString = (date.getMonth() + 1) + '月' + date.getDate() + '日'
            var weekList = ['日', '一', '二', '三', '四', '五', '六']
            var weekString = '星期' + weekList[date.getDay()]

            document.getElementById("time").innerHTML = timeString
            document.getElementById("date").innerHTML = dateString + " " + weekString
        }

        clock()

        setInterval("clock()", 60 * 1000)
    </script>
</body>

</html>